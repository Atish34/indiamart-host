import{D as j,u as f,d as y,h as v,r as m,B as N,i as g,j as s,m as C}from"./index-a34ac5e4.js";import{u as b,c as F,a as t}from"./index.esm-df8c1c2c.js";import{F as p}from"./Form-266b32ff.js";import{R as E,O}from"./OrderSummery-02abdfb6.js";import{C as i}from"./Container-16b23771.js";import{F as h}from"./FormControl-337777c8.js";import{B as S}from"./Button-9fc4f2d9.js";import"./ThemeProvider-48707fb0.js";import"./index-813497d4.js";import"./Col-685b5cc5.js";import"./iconBase-3f08b881.js";import"./Button-952ae1d0.js";const M=()=>{const[u,{isSuccess:c}]=j(),{cart:a}=f(e=>e.bag),o=y(),d=v(),r=b({initialValues:{address:"",city:"",payment:""},validationSchema:F({address:t().required("Enter address"),city:t().required("Enter city"),payment:t().required("Choose payment type")}),onSubmit:(e,{resetForm:n})=>{u({...e,products:a.map(x=>x._id)}),n()}}),l=e=>C({"form-control my-2":!0,"is-invalid":r.touched[e]&&r.errors[e],"is-valid":r.touched[e]&&!r.errors[e]});return m.useEffect(()=>{a.length===0&&d("/")},[]),m.useEffect(()=>{c&&(N.success("order placed success"),o(g()),d("/success"))},[c]),s.jsx(i,{children:s.jsx("form",{onSubmit:r.handleSubmit,children:s.jsxs("div",{className:"d-flex justify-content-between gap-5 ",children:[s.jsx(i,{className:"bg-light",children:s.jsx("div",{className:"row py-4",children:s.jsxs("div",{children:[s.jsx(h,{...r.getFieldProps("address"),className:l("address"),placeholder:"Enter Address"}),s.jsx(h,{...r.getFieldProps("city"),className:l("city"),placeholder:"Enter city"}),s.jsx(p.Check,{...r.getFieldProps("payment"),type:"radio",name:"payment",value:"cod",id:"cod",label:"COD"}),s.jsx(p.Check,{...r.getFieldProps("payment"),type:"radio",name:"payment",value:"online",id:"online",label:"ONLINE"})]})})}),s.jsxs(i,{className:"mx-0",children:[s.jsx("h5",{className:"mt-3",children:"Order Summary"}),s.jsxs("div",{className:"card w-75",children:[s.jsx("div",{className:"w-50",children:a.map(e=>s.jsxs("div",{className:"d-flex gap-2 my-4 align-items-start",children:[s.jsx("img",{src:e.hero[0],height:100,alt:""}),s.jsxs("div",{children:[s.jsx("h6",{children:e.name}),s.jsxs("p",{children:["price : ",e.price]})]}),s.jsx(S,{onClick:n=>o(removeFromCart(e)),className:"ms-auto",variant:"outline-danger",children:s.jsx(E,{})})]},e._id))}),s.jsx("div",{className:"card-body",children:s.jsx(O,{showCheckout:!1})}),s.jsx("div",{className:"card-footer",children:s.jsx("button",{type:"submit",className:"btn btn-primary",children:"Confirm Order"})})]})]})]})})})};export{M as default};
